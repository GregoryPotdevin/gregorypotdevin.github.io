<!DOCTYPE html>
<!-- saved from url=(0045)http://fiddle.jshell.net/oyogv3ja/show/light/ -->
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<title>CampusAAR video demo</title>

	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="http://popcornjs.org/code/dist/popcorn-complete.min.js"></script>
	<script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.ba-bbq/1.2.1/jquery.ba-bbq.min.js"></script>

	<link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">

	<style type="text/css">
		@import url('http://www.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css');
		.fluid-container {
			padding: 15px;
			margin-left: auto;
			margin-right: auto;
		}
		.video-container {
			width:100%;
			padding: 0px;
		}
		.video {
			width:100%;
			height:100%;
		}
		.info-item {
			display: none;
			visibility: hidden;
		}
		.info-item.selected {
			display: block;
			visibility: visible;
		}
		.form-compact .form-control {
			padding: 1px 2px;
			height: 24px;
		}
		.form-compact label {
			margin-bottom: 1px;
		}
		.form-compact .form-group {
			margin-bottom:0px;
		}
		.tab-content {
			border-left: 1px solid #ddd;
			border-right: 1px solid #ddd;
			border-bottom: 1px solid #ddd;
			padding: 10px;
		}
		.sequence-list {
			padding: 0px;
		}
	</style>



<script type="text/javascript">//<![CDATA[ 
	$(window).load(function(){
		var pop = Popcorn("#video-frame");

		function formatTime(seconds) {
			var min = Math.floor(seconds / 60);
			var sec = seconds % 60;
			return (min < 10 ? "0" + min : min) + ":" + (sec < 10 ? "0" + sec : sec);
		}

		function loadSequences(sequences) {
			var list = $("#sequences");
			var info = $("#info");

			$.each(sequences, function (idx, seq) {
				var seq_id = "seq-" + idx;
				var sequence = $('\
					<a href="#" id="' + seq_id + '" class="list-group-item">\
						<h4>' + seq.text + '</h4>\
						<p>' + formatTime(seq.start) + ' - ' + formatTime(seq.end) + '</p>\
					</a>');
        //urlHash = $.param({ start: seq.start });
        //sequence.fragment( urlHash, 2 );
        list.append(sequence);
        sequence.click(function () {
        	var video = $('#video-frame');
        	video[0].currentTime = seq.start;
        	video[0].play();
            //var href = sequence.attr( "href" );
            //$.bbq.pushState({ url: href });
          });
        $("#header ul").append('<li ><a href="/user/messages"><span class="tab">Message Center</span></a></li>');
        pop.footnote({
        	start: seq.start,
        	end: seq.end,
        	text: '',
        	target: seq_id,
        	effect: "applyclass",
        	applyclass: "active"
        });

        var info_id = "info-" + idx;
        var info_entry = $('\
        	<div id="' + info_id + '" class="info-item" role="tabpanel">\
        		<ul id="tabs-' + info_id + '" class="nav nav-tabs" role="tablist">\
        			<li role="presentation" class="active"><a href="#' + info_id + '-info" aria-controls="' + info_id + '-info" role="tab" data-toggle="tab">Info</a></li>\
        			<li role="presentation"><a href="#' + info_id + '-time" aria-controls="' + info_id + '-time" role="tab" data-toggle="tab">Time</a></li>\
        		</ul>\
        		<div class="tab-content">\
        			<div role="tabpanel" class="tab-pane active" id="' + info_id + '-info">\
        				<form class="form-horizontal form-compact" role="form">\
        					<div class="form-group">\
        						<label class="col-sm-2 control-label">Id: </label>\
        						<div class="col-sm-10"> <p class="form-control-static">' + seq_id + '</p>  </div>\
        					</div>\
        					<div class="form-group">\
        						<label class="col-sm-2 control-label">Description: </label>\
        						<div class="col-sm-10"> <p class="form-control-static">' + seq.text + '</p>  </div>\
        					</div>\
        				</form>\
        			</div>\
        			<div role="tabpanel" class="tab-pane" id="' + info_id + '-time">\
        				<form class="form-horizontal form-compact" role="form">\
        					<div class="form-group">\
        						<label class="col-sm-2 control-label">Start: </label>\
        						<div class="col-sm-10"> <p class="form-control-static">' + formatTime(seq.start) + '</p></div>\
        					</div>\
        					<div class="form-group">\
        						<label class="col-sm-2 control-label">End: </label>\
        						<div class="col-sm-10"> <p class="form-control-static">' + formatTime(seq.end) + '</p></div>\
        					</div>\
        				</form>\
        			</div>\
        		</div>\
        		');
info.append(info_entry);
pop.footnote({
	start: seq.start,
	end: seq.end,
	text: '',
	target: info_id,
	effect: "applyclass",
	applyclass: "selected"
});
});


pop.play();
}
//loadSequences(sequences);

$.getJSON("http://www.mocky.io/v2/5492e82d827817e408aa8fd2", function (data) {
	loadSequences(data.sequences);
});
});//]]>  

</script>


</head>
<body>
	<div class="fluid-container">
		<div class="col-md-5">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Video Title</h3>
				</div>
				<div class="panel-body video-container">
					<video id="video-frame" class="video" src="http://upload.wikimedia.org/wikipedia/commons/a/ac/P2puvid.ogv" controls=""></video>
				</div>
			</div>
			<div class="panel panel-info">
				<div class="panel-heading">
					<h3 class="panel-title">Sequences</h3>
				</div>
				<div class="panel-body sequence-list">
					<div id="sequences" class="list-group"></div>
				</div>
			</div>
		</div>
		<div class="col-md-7">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<h3 class="panel-title">Sequence metadata</h3>
				</div>
				<div id="info" class="panel-body"></div>
			</div>
		</div>
	</div>
</body>
</html>